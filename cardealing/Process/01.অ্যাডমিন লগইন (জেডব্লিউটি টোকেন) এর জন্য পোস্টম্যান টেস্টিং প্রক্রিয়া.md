# অ্যাডমিন লগইন (জেডব্লিউটি টোকেন) এর জন্য পোস্টম্যান টেস্টিং প্রক্রিয়া

নিচে `/auth/jwt/login/` এন্ডপয়েন্ট ব্যবহার করে অ্যাডমিন লগইনের জন্য Postman-এ API টেস্ট করার ধাপগুলো বাংলায় বর্ণনা করা হলো। এটি প্রদত্ত Django প্রজেক্টের `urls.py` এবং `settings.py` অনুযায়ী `rest_framework_simplejwt`-এর `TokenObtainPairView` ব্যবহার করে। ধরে নেওয়া হচ্ছে আপনি সুপারইউজার তৈরি করেছেন এবং Postman সেটআপ করা আছে।

## ধাপসমূহ

### ধাপ ১: Postman-এ নতুন রিকোয়েস্ট তৈরি করা
1. Postman খুলুন এবং **"New"** বোতামে ক্লিক করে **"HTTP Request"** নির্বাচন করুন।
2. রিকোয়েস্টের নাম দিন, যেমন: `Admin JWT Login`।
3. রিকোয়েস্ট পদ্ধতি **POST** হিসেবে সেট করুন।
4. URL ফিল্ডে এন্টার করুন: `http://localhost:8000/auth/jwt/login/`  
   *(আপনার Django সার্ভার যদি অন্য পোর্টে চলে, তবে পোর্ট নম্বর পরিবর্তন করুন, যেমন `127.0.0.1:8000`)*

### ধাপ ২: রিকোয়েস্ট বডি সেটআপ করা
1. Postman-এ **Body** ট্যাবে যান।
2. **raw** অপশন নির্বাচন করুন এবং ড্রপডাউন থেকে **JSON** সিলেক্ট করুন।
3. নিচের JSON ফরম্যাটে অ্যাডমিনের লগইন তথ্য লিখুন:
   ```json
   {
       "email": "admin@example.com",
       "password": "yourpassword"
   }


email: আপনার সুপারইউজারের ইমেইল (যেমন, createsuperuser কমান্ডে দেওয়া ইমেইল)।
password: সুপারইউজারের পাসওয়ার্ড।
উদাহরণ:{
    "email": "superadmin@example.com",
    "password": "admin123"
}



ধাপ ৩: হেডার সেট করা

Headers ট্যাবে যান।
নিম্নলিখিত হেডার যোগ করুন:
Key: Content-Type
Value: application/json(এটি নিশ্চিত করে যে রিকোয়েস্ট JSON ফরম্যাটে পাঠানো হচ্ছে)



ধাপ ৪: রিকোয়েস্ট পাঠানো

Django সার্ভার চালু আছে কিনা নিশ্চিত করুন:python manage.py runserver


Postman-এ Send বোতামে ক্লিক করুন।
রিকোয়েস্ট পাঠানোর পর রেসপন্স দেখুন।

ধাপ ৫: রেসপন্স যাচাই করা

সফল রেসপন্স (HTTP Status: 200 OK):
রেসপন্স বডিতে আপনি নিচের মতো JWT টোকেন পাবেন:{
    "refresh": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
    "access": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}


refresh: রিফ্রেশ টোকেন, যা নতুন অ্যাকসেস টোকেন জেনারেট করতে ব্যবহৃত হয়।
access: অ্যাকসেস টোকেন, যা পরবর্তী API কলের জন্য অথেনটিকেশন হিসেবে ব্যবহৃত হবে।


ব্যর্থ রেসপন্স (যেমন, HTTP Status: 401 Unauthorized):
ভুল ইমেইল বা পাসওয়ার্ড দিলে:{
    "detail": "No active account found with the given credentials"
}


এটি ইঙ্গিত করে যে ইমেইল বা পাসওয়ার্ড সঠিক নয়। ইমেইল/পাসওয়ার্ড পুনরায় যাচাই করুন।



ধাপ ৬: অ্যাকসেস টোকেন সংরক্ষণ করা

Postman-এ Tests ট্যাবে যান এবং নিচের JavaScript কোড যোগ করুন যাতে অ্যাকসেস টোকেন সংরক্ষণ করা যায়:const response = pm.response.json();
pm.environment.set("access_token", response.access);
pm.environment.set("refresh_token", response.refresh);


Postman-এ একটি নতুন Environment তৈরি করুন (যেমন, CarServiceAPI) এবং এই টোকেনগুলো সংরক্ষণ করুন।
পরবর্তী API কলের জন্য Authorization ট্যাবে যান এবং:
Type: Bearer Token নির্বাচন করুন।
Token: {{access_token}} সেট করুন (Environment থেকে নেওয়া হবে)।



ধাপ ৭: রিফ্রেশ টোকেন ব্যবহার করা (ঐচ্ছিক)

যদি অ্যাকসেস টোকেন মেয়াদোত্তীর্ণ হয় (ডিফল্ট: ৬০ মিনিট, settings.py-এ SIMPLE_JWT দেখুন), তবে /auth/jwt/refresh/ এন্ডপয়েন্ট ব্যবহার করুন।
নতুন রিকোয়েস্ট তৈরি করুন:
Method: POST
URL: http://localhost:8000/auth/jwt/refresh/
Body (JSON):{
    "refresh": "{{refresh_token}}"
}




Send ক্লিক করুন এবং নতুন অ্যাকসেস টোকেন পান:{
    "access": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}


নতুন অ্যাকসেস টোকেনটি Postman Environment-এ আপডেট করুন:pm.environment.set("access_token", pm.response.json().access);



ধাপ ৮: টেস্টিং নিশ্চিত করা

সফল লগইনের পর, অ্যাকসেস টোকেন ব্যবহার করে একটি সুরক্ষিত এন্ডপয়েন্ট টেস্ট করুন, যেমন /auth/me/ (বর্তমান ইউজারের তথ্য পেতে):
Method: GET
URL: http://localhost:8000/auth/me/
Authorization: Bearer {{access_token}}
রেসপন্স (উদাহরণ):{
    "id": 1,
    "username": "superadmin",
    "email": "superadmin@example.com",
    "first_name": "",
    "last_name": "",
    "is_active": true,
    "is_staff": true,
    "date_joined": "2025-09-30T13:00:00Z",
    "profile_type": "admin"
}




যদি রেসপন্স সঠিক হয়, তবে লগইন প্রক্রিয়া সফল।

সম্ভাব্য সমস্যা ও সমাধান

ইমেইল/পাসওয়ার্ড ভুল: সুপারইউজারের তথ্য পুনরায় যাচাই করুন (createsuperuser কমান্ড দিয়ে তৈরি ইউজার)।
CORS ত্রুটি: settings.py-এ CORS_ALLOWED_ORIGINS এ Postman-এর URL (যেমন, http://localhost:3000) অন্তর্ভুক্ত আছে কিনা নিশ্চিত করুন।
সার্ভার চলছে না: Django সার্ভার চালু আছে কিনা চেক করুন (python manage.py runserver)।
টোকেন মেয়াদোত্তীর্ণ: রিফ্রেশ টোকেন ব্যবহার করে নতুন অ্যাকসেস টোকেন জেনারেট করুন।

এই প্রক্রিয়া অনুসরণ করে আপনি Postman-এ অ্যাডমিন লগইন API সফলভাবে টেস্ট করতে পারবেন এবং পরবর্তী API কলের জন্য JWT টোকেন ব্যবহার করতে পারবেন।```